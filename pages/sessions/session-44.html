<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sesi 44: Read External File ‚Äì Open Dan With - Cendiks</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="../css/styles.css">
    <script src="../js/scripts.js"></script>
</head>
<body class="bg-gray-50 text-gray-800 font-sans">
    <!-- Header -->
    <header class="bg-white shadow-md">
        <div class="container mx-auto px-4 py-4 flex justify-between items-center">
            <button onclick="history.back()" class="text-gray-600 hover:text-primary mr-4">‚Üê Kembali</button>
            <h1 class="text-2xl font-bold text-primary">Cendiks</h1>
            <nav class="space-x-4">
                <a href="../index.html" class="text-gray-600 hover:text-primary">Beranda</a>
                <a href="sessions.html" class="text-gray-600 hover:text-primary">Sesi Pembelajaran</a>
                <a href="install.html" class="text-gray-600 hover:text-primary">Instalasi Python</a>
                <a href="certification.html" class="text-gray-600 hover:text-primary">Ujian Sertifikasi</a>
                <a href="more.html" class="text-gray-600 hover:text-primary">More</a>
            </nav>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="bg-gradient-to-r from-blue-100 to-yellow-100 py-20">
        <div class="container mx-auto px-4 text-center">
            <h2 class="text-4xl font-bold mb-4 text-gray-800 fade-in-up">üìö Sesi 44: Read External File ‚Äì Open Dan With</h2>
            <p class="text-xl mb-8 text-gray-600 slide-in-right">Pelajari cara membaca file eksternal menggunakan open() dan with statement</p>
        </div>
    </section>

    <!-- Content Section -->
    <section class="py-16">
        <div class="container mx-auto px-4 max-w-4xl">
            <div class="bg-white p-8 rounded-lg shadow-md">
                <h3 class="text-2xl font-bold mb-6">Materi Pembelajaran</h3>

                <div class="mb-8">
                    <h4 class="text-xl font-semibold mb-4">1Ô∏è‚É£ Apa Itu File Handling?</h4>
                    <p class="text-gray-600 mb-4">Membaca dan menulis file eksternal adalah operasi penting dalam pemrograman Python.</p>
                    <div class="bg-gray-100 p-4 rounded-lg mb-4">
                        <pre><code># File handling adalah proses membaca dan menulis data ke file eksternal
# Mengapa penting?
# - Menyimpan data secara permanen
# - Membaca data dari sumber eksternal
# - Memproses data dalam jumlah besar
# - Berbagi data antar program

# Jenis operasi file:
# - Read (r): Membaca file
# - Write (w): Menulis file (menimpa jika ada)
# - Append (a): Menambah data ke file
# - Read+Write (r+): Membaca dan menulis
# - Binary (b): Untuk file biner

# Mode file:
# 'r'  - Read only
# 'w'  - Write only (overwrite)
# 'a'  - Append
# 'r+' - Read and write
# 'w+' - Write and read (overwrite)
# 'a+' - Append and read

# Contoh dasar membaca file
try:
    file = open('data.txt', 'r')
    content = file.read()
    print(content)
    file.close()
except FileNotFoundError:
    print("File tidak ditemukan")
except Exception as e:
    print(f"Error: {e}")

# Menggunakan with statement (recommended)
try:
    with open('data.txt', 'r') as file:
        content = file.read()
        print(content)
    # File otomatis ditutup di sini
except FileNotFoundError:
    print("File tidak ditemukan")

print("File handling memungkinkan program berinteraksi dengan sistem file")</code></pre>
                    </div>
                </div>

                <div class="mb-8">
                    <h4 class="text-xl font-semibold mb-4">2Ô∏è‚É£ Fungsi open() dan Mode File</h4>
                    <p class="text-gray-600 mb-4">Pelajari cara menggunakan fungsi open() dengan berbagai mode untuk membaca file.</p>
                    <div class="bg-gray-100 p-4 rounded-lg mb-4">
                        <pre><code># Fungsi open() digunakan untuk membuka file
# Sintaks: open(filename, mode, encoding)
# filename: nama/path file
# mode: mode pembukaan file
# encoding: encoding karakter (default: platform dependent)

# Mode-mode yang tersedia:
# 'r'  - Read (default) - membaca file
# 'w'  - Write - menulis file (menimpa jika ada)
# 'a'  - Append - menambah ke file yang ada
# 'x'  - Create - membuat file baru (error jika sudah ada)
# 'r+' - Read + Write
# 'w+' - Write + Read (menimpa)
# 'a+' - Append + Read
# 'b'  - Binary mode (gabung dengan mode lain, contoh 'rb', 'wb')
# 't'  - Text mode (default)

# Contoh membaca file teks
print("=== Membaca File Teks ===")
try:
    with open('data.txt', 'r', encoding='utf-8') as file:
        content = file.read()
        print("Isi file:")
        print(content)
except FileNotFoundError:
    print("File data.txt tidak ditemukan")

# Membaca per baris
print("\n=== Membaca Per Baris ===")
try:
    with open('data.txt', 'r', encoding='utf-8') as file:
        for line_number, line in enumerate(file, 1):
            print(f"Baris {line_number}: {line.strip()}")
except FileNotFoundError:
    print("File data.txt tidak ditemukan")

# Membaca semua baris ke dalam list
print("\n=== Membaca Semua Baris ke List ===")
try:
    with open('data.txt', 'r', encoding='utf-8') as file:
        lines = file.readlines()
        print(f"Jumlah baris: {len(lines)}")
        for i, line in enumerate(lines[:3], 1):  # Tampilkan 3 baris pertama
            print(f"Baris {i}: {line.strip()}")
except FileNotFoundError:
    print("File data.txt tidak ditemukan")

# Mode write
print("\n=== Menulis File ===")
with open('output.txt', 'w', encoding='utf-8') as file:
    file.write("Ini adalah file output\n")
    file.write("Baris kedua\n")
    file.write("Baris ketiga\n")

print("File output.txt berhasil dibuat")

# Mode append
print("\n=== Menambah ke File (Append) ===")
with open('output.txt', 'a', encoding='utf-8') as file:
    file.write("Baris yang ditambahkan\n")

print("Data berhasil ditambahkan ke file")</code></pre>
                    </div>
                </div>

                <div class="mb-8">
                    <h4 class="text-xl font-semibold mb-4">3Ô∏è‚É£ With Statement untuk File Handling</h4>
                    <p class="text-gray-600 mb-4">Pelajari penggunaan with statement yang aman dan efisien untuk file handling.</p>
                    <div class="bg-gray-100 p-4 rounded-lg mb-4">
                        <pre><code># With statement adalah cara terbaik untuk handle file di Python
# Keuntungan:
# - Otomatis menutup file setelah selesai
# - Menangani exception dengan baik
# - Kode lebih bersih dan readable
# - Mengurangi risiko resource leak

# Sintaks dasar:
# with open(filename, mode) as file_object:
#     # operasi file di sini
#     pass

print("=== Menggunakan With Statement ===")

# Contoh membaca file dengan with
try:
    with open('data.txt', 'r', encoding='utf-8') as file:
        content = file.read()
        print("Berhasil membaca file:")
        print(content[:100] + "..." if len(content) > 100 else content)
except FileNotFoundError:
    print("File data.txt tidak ditemukan")

# Contoh menulis file dengan with
print("\n=== Menulis File dengan With ===")
data_to_write = """Nama: John Doe
Usia: 25
Kota: Jakarta
Pekerjaan: Programmer
"""

with open('profile.txt', 'w', encoding='utf-8') as file:
    file.write(data_to_write)

print("File profile.txt berhasil dibuat")

# Contoh multiple file operations
print("\n=== Multiple File Operations ===")
try:
    # Membaca dari satu file dan menulis ke file lain
    with open('profile.txt', 'r', encoding='utf-8') as source_file:
        content = source_file.read()
    
    with open('profile_copy.txt', 'w', encoding='utf-8') as dest_file:
        dest_file.write("COPY OF PROFILE:\n")
        dest_file.write("=" * 20 + "\n")
        dest_file.write(content)
    
    print("File berhasil dicopy")
except FileNotFoundError:
    print("File sumber tidak ditemukan")

# Contoh dengan exception handling
print("\n=== Exception Handling dengan With ===")
def safe_file_read(filename):
    try:
        with open(filename, 'r', encoding='utf-8') as file:
            return file.read()
    except FileNotFoundError:
        return f"Error: File '{filename}' tidak ditemukan"
    except PermissionError:
        return f"Error: Tidak ada izin untuk membaca '{filename}'"
    except UnicodeDecodeError:
        return f"Error: File '{filename}' bukan file teks valid"
    except Exception as e:
        return f"Error: {str(e)}"

result = safe_file_read('profile.txt')
print("Hasil pembacaan:")
print(result)

# Contoh dengan context manager custom (advanced)
print("\n=== Custom Context Manager ===")
class FileHandler:
    def __init__(self, filename, mode='r'):
        self.filename = filename
        self.mode = mode
        self.file = None
    
    def __enter__(self):
        self.file = open(self.filename, self.mode, encoding='utf-8')
        return self.file
    
    def __exit__(self, exc_type, exc_val, exc_tb):
        if self.file:
            self.file.close()
        return False  # Re-raise exception jika ada

# Menggunakan custom context manager
try:
    with FileHandler('profile.txt', 'r') as file:
        lines = file.readlines()
        print(f"File memiliki {len(lines)} baris")
except Exception as e:
    print(f"Error: {e}")

print("\nWith statement memastikan file selalu ditutup dengan benar!")</code></pre>
                    </div>
                </div>

                <div class="mb-8">
                    <h4 class="text-xl font-semibold mb-4">4Ô∏è‚É£ Exception Handling dalam File Operations</h4>
                    <p class="text-gray-600 mb-4">Menangani error dan exception yang mungkin terjadi saat operasi file.</p>
                    <div class="bg-gray-100 p-4 rounded-lg mb-4">
                        <pre><code># Exception handling sangat penting dalam file operations
# Karena berbagai hal bisa salah: file tidak ada, izin tidak cukup, disk penuh, dll.

print("=== Exception Handling Dasar ===")

# Contoh tanpa exception handling (berbahaya)
print("Tanpa exception handling:")
try:
    file = open('tidak_ada.txt', 'r')
    content = file.read()
    print(content)
    file.close()
except FileNotFoundError:
    print("File tidak ditemukan!")

# Dengan exception handling yang proper
print("\nDengan exception handling:")

def read_file_safely(filename):
    """Fungsi untuk membaca file dengan exception handling lengkap"""
    try:
        with open(filename, 'r', encoding='utf-8') as file:
            content = file.read()
            print(f"‚úÖ Berhasil membaca file '{filename}'")
            return content
    except FileNotFoundError:
        print(f"‚ùå FileNotFoundError: File '{filename}' tidak ditemukan")
        return None
    except PermissionError:
        print(f"‚ùå PermissionError: Tidak ada izin untuk membaca '{filename}'")
        return None
    except UnicodeDecodeError:
        print(f"‚ùå UnicodeDecodeError: File '{filename}' bukan file teks valid")
        return None
    except IsADirectoryError:
        print(f"‚ùå IsADirectoryError: '{filename}' adalah direktori, bukan file")
        return None
    except Exception as e:
        print(f"‚ùå Error tidak terduga: {str(e)}")
        return None

# Test berbagai skenario error
print("\n=== Testing Berbagai Error Scenarios ===")

# File yang ada
result = read_file_safely('mahasiswa.txt')

# File yang tidak ada
result = read_file_safely('file_tidak_ada.txt')

# Coba akses direktori sebagai file
result = read_file_safely('pages')  # Asumsi ada folder pages

print("\n=== Exception Handling dalam Loop ===")

# Membaca multiple files dengan exception handling
file_list = ['mahasiswa.txt', 'profile.txt', 'tidak_ada.txt', 'app.log']

for filename in file_list:
    print(f"\nMencoba membaca: {filename}")
    content = read_file_safely(filename)
    if content:
        print(f"Preview: {content[:50]}..." if len(content) > 50 else f"Isi: {content}")

print("\n=== Custom Exception untuk File Operations ===")

class FileOperationError(Exception):
    """Custom exception untuk file operations"""
    pass

def process_student_file(filename):
    """Memproses file mahasiswa dengan custom exception"""
    try:
        with open(filename, 'r', encoding='utf-8') as file:
            content = file.read()

        # Validasi format file
        if 'Nama:' not in content:
            raise FileOperationError("File tidak mengandung data mahasiswa yang valid")

        if 'IPK:' not in content:
            raise FileOperationError("File tidak mengandung data IPK")

        print(f"‚úÖ File '{filename}' valid dan berhasil diproses")
        return content

    except FileNotFoundError:
        raise FileOperationError(f"File '{filename}' tidak ditemukan")
    except PermissionError:
        raise FileOperationError(f"Tidak ada izin untuk mengakses '{filename}'")
    except Exception as e:
        raise FileOperationError(f"Error memproses file: {str(e)}")

# Test custom exception
print("\nTesting custom exception:")
try:
    result = process_student_file('mahasiswa.txt')
except FileOperationError as e:
    print(f"‚ùå FileOperationError: {e}")

try:
    result = process_student_file('tidak_ada.txt')
except FileOperationError as e:
    print(f"‚ùå FileOperationError: {e}")

print("\n=== Best Practices Exception Handling ===")
print("1. Selalu gunakan try-except untuk file operations")
print("2. Tangkap exception spesifik terlebih dahulu")
print("3. Gunakan finally untuk cleanup jika perlu")
print("4. Berikan pesan error yang informatif")
print("5. Gunakan with statement untuk auto-close files")
print("6. Consider custom exceptions untuk business logic")

# Contoh dengan finally block
print("\n=== Menggunakan Finally Block ===")

def write_log_with_finally(message, filename='app.log'):
    """Menulis log dengan finally block"""
    file = None
    try:
        file = open(filename, 'a', encoding='utf-8')
        import datetime
        timestamp = datetime.datetime.now().strftime('%Y-%m-%d %H:%M:%S')
        file.write(f"[{timestamp}] {message}\n")
        print(f"‚úÖ Log berhasil ditulis ke '{filename}'")
    except Exception as e:
        print(f"‚ùå Gagal menulis log: {e}")
    finally:
        # Pastikan file selalu ditutup
        if file:
            file.close()
            print("üìÅ File log ditutup")

# Test finally block
write_log_with_finally("Testing finally block")

print("\nException handling membuat aplikasi lebih robust dan user-friendly!")</code></pre>
                    </div>
                </div>

                <div class="mb-8">
                    <h4 class="text-xl font-semibold mb-4">5Ô∏è‚É£ Latihan Praktis</h4>
                    <p class="text-gray-600 mb-4">Implementasi berbagai teknik file handling dengan Python.</p>
                    <div class="bg-gray-100 p-4 rounded-lg mb-4">
                        <pre><code># Latihan 1: Membuat dan membaca file teks sederhana
print("=== Latihan 1: File Teks Sederhana ===")

# Buat file dengan data mahasiswa
students_data = """Nama: Ahmad Surya
NIM: 12345678
Jurusan: Informatika
IPK: 3.75

Nama: Budi Santoso
NIM: 12345679
Jurusan: Sistem Informasi
IPK: 3.60

Nama: Citra Dewi
NIM: 12345680
Jurusan: Informatika
IPK: 3.85
"""

with open('mahasiswa.txt', 'w', encoding='utf-8') as file:
    file.write(students_data)

print("File mahasiswa.txt berhasil dibuat")

# Baca dan tampilkan data
with open('mahasiswa.txt', 'r', encoding='utf-8') as file:
    content = file.read()
    print("Isi file mahasiswa.txt:")
    print(content)

# Latihan 2: Membaca file per baris dan parsing data
print("\n=== Latihan 2: Parsing Data Mahasiswa ===")

students = []
current_student = {}

with open('mahasiswa.txt', 'r', encoding='utf-8') as file:
    for line in file:
        line = line.strip()
        if line.startswith('Nama:'):
            if current_student:
                students.append(current_student)
            current_student = {'nama': line.split(': ')[1]}
        elif line.startswith('NIM:'):
            current_student['nim'] = line.split(': ')[1]
        elif line.startswith('Jurusan:'):
            current_student['jurusan'] = line.split(': ')[1]
        elif line.startswith('IPK:'):
            current_student['ipk'] = float(line.split(': ')[1])

# Jangan lupa tambahkan mahasiswa terakhir
if current_student:
    students.append(current_student)

print(f"Jumlah mahasiswa: {len(students)}")
for student in students:
    print(f"- {student['nama']} ({student['nim']}) - {student['jurusan']} - IPK: {student['ipk']}")

# Latihan 3: Menulis data ke CSV sederhana
print("\n=== Latihan 3: Export ke CSV ===")

import csv

# Header CSV
header = ['NIM', 'Nama', 'Jurusan', 'IPK']

# Tulis ke CSV
with open('mahasiswa.csv', 'w', newline='', encoding='utf-8') as csvfile:
    writer = csv.writer(csvfile)
    writer.writerow(header)
    
    for student in students:
        writer.writerow([
            student['nim'],
            student['nama'],
            student['jurusan'],
            student['ipk']
        ])

print("File mahasiswa.csv berhasil dibuat")

# Baca CSV
print("Membaca file CSV:")
with open('mahasiswa.csv', 'r', encoding='utf-8') as csvfile:
    reader = csv.reader(csvfile)
    for row in reader:
        print(', '.join(row))

# Latihan 4: File operations dengan exception handling
print("\n=== Latihan 4: File Operations Aman ===")

def copy_file_safe(source, destination):
    """Copy file dengan error handling"""
    try:
        with open(source, 'r', encoding='utf-8') as src:
            content = src.read()
        
        with open(destination, 'w', encoding='utf-8') as dst:
            dst.write(content)
        
        print(f"‚úÖ File berhasil dicopy dari {source} ke {destination}")
        return True
        
    except FileNotFoundError:
        print(f"‚ùå File sumber '{source}' tidak ditemukan")
        return False
    except PermissionError:
        print(f"‚ùå Tidak ada izin untuk menulis ke '{destination}'")
        return False
    except Exception as e:
        print(f"‚ùå Error: {str(e)}")
        return False

# Test copy file
copy_file_safe('mahasiswa.txt', 'mahasiswa_copy.txt')

# Latihan 5: Log file sederhana
print("\n=== Latihan 5: Simple Log File ===")

import datetime

def write_log(message, level='INFO'):
    """Menulis log ke file"""
    timestamp = datetime.datetime.now().strftime('%Y-%m-%d %H:%M:%S')
    log_entry = f"[{timestamp}] {level}: {message}\n"
    
    with open('app.log', 'a', encoding='utf-8') as log_file:
        log_file.write(log_entry)
    
    print(f"Log ditulis: {message}")

# Test logging
write_log("Aplikasi dimulai")
write_log("Memproses data mahasiswa", "INFO")
write_log("File berhasil dibuat", "SUCCESS")
write_log("Proses selesai")

# Baca log file
print("\nIsi file log:")
with open('app.log', 'r', encoding='utf-8') as file:
    print(file.read())

print("\nüéâ Semua latihan file handling selesai!")</code></pre>
                    </div>
                </div>

                <div class="mb-8">
                    <h4 class="text-xl font-semibold mb-4">6Ô∏è‚É£ Video Tutorial</h4>
                    <iframe width="100%" height="315" src="https://www.youtube.com/embed/ADcQu-8R0Ok" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen class="rounded-lg"></iframe>
                </div>

                <div class="mb-8">
                    <h4 class="text-xl font-semibold mb-4">7Ô∏è‚É£ Kuis Interaktif</h4>
                    <div class="space-y-4">
                        <div>
                            <p class="font-medium mb-2">1. Apa keuntungan utama menggunakan 'with' statement untuk file handling?</p>
                            <div class="space-y-2">
                                <label class="flex items-center">
                                    <input type="radio" name="q1" value="a" class="mr-2">
                                    <span>File otomatis ditutup setelah digunakan</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="q1" value="b" class="mr-2">
                                    <span>Kode menjadi lebih panjang</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="q1" value="c" class="mr-2">
                                    <span>File tidak bisa dibaca</span>
                                </label>
                            </div>
                        </div>
                        <div>
                            <p class="font-medium mb-2">2. Mode file apa yang digunakan untuk menambah data ke file yang sudah ada?</p>
                            <div class="space-y-2">
                                <label class="flex items-center">
                                    <input type="radio" name="q2" value="a" class="mr-2">
                                    <span>'r' (read)</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="q2" value="b" class="mr-2">
                                    <span>'a' (append)</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="q2" value="c" class="mr-2">
                                    <span>'w' (write)</span>
                                </label>
                            </div>
                        </div>
                        <div>
                            <p class="font-medium mb-2">3. Fungsi apa yang digunakan untuk membaca semua baris file ke dalam list?</p>
                            <div class="space-y-2">
                                <label class="flex items-center">
                                    <input type="radio" name="q3" value="a" class="mr-2">
                                    <span>read()</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="q3" value="b" class="mr-2">
                                    <span>readlines()</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="q3" value="c" class="mr-2">
                                    <span>readline()</span>
                                </label>
                            </div>
                        </div>
                        <button onclick="checkQuiz()" class="bg-primary text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition duration-300">Periksa Jawaban</button>
                        <div id="quiz-result" class="mt-4"></div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8">
        <div class="container mx-auto px-4 text-center">
            <p>&copy; 2023 Cendiks. Platform belajar Python untuk semua.</p>
        </div>
    </footer>
</body>
</html>
